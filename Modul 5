#include <stdio.h>
int menu(void);
void print_options(double kurs);
int choice(void);
double valutakurs(void);
double summera(double kurs);
double efterfraga_pris(void);
void skriv_summa(double sum, double kurs);
int main(void)
{
    int nr;
    double kurs, sum;

    kurs = 1.00;

    printf("\nYour shopping assistant\n");

    print_options(kurs);

    while (nr != 3)
    {
        nr = choice();

        switch(nr)
        {
        case 1: kurs = valutakurs();
                print_options(kurs);
                break;
        case 2: sum = summera(kurs);
                skriv_summa(sum, kurs);
                print_options(kurs);
                break;
        case 3: printf("End of program!\n");
                break;
        default: printf("Not a valid choice!\n");
                print_options(kurs);
                break;
    }
    }
      return 0;
}
void print_options(double kurs)
{
    printf("\n1. Set exchange rate in SEK (current rate: %.2lf)\n", kurs);
    printf("2. Convert prices from the foreign currency\n");
    printf("3. End\n\n");
    printf("Give your choice (1 - 3): ");
}

int choice(void)
{
    int nr;

    scanf("%d", &nr);

    printf("\n");

    return nr;
}

double valutakurs(void)
{
    double kurs;

    printf("Give exchange rate:  ");

    scanf("%le", &kurs);

    return kurs;
}

double summera(double kurs)
{
    double sum, pris, sum_temp;

    do  {

    pris = efterfraga_pris();

    if(pris < 0)
    {
        break;
    }

    else
    {
      sum_temp = sum_temp + pris;
    }

    }
    while (pris >= 0);


    sum = sum_temp * kurs;

    return sum;
}

double efterfraga_pris(void)
{
    double pris;

    printf("Give price (finish with < 0):  ");

    scanf("%lf", &pris);

    return pris;

}

void skriv_summa(double sum, double kurs)
{
    double foreign;

    foreign = sum/kurs;

    printf("\nSum in foreign currency: %.2lf\n", foreign);
    printf("Sum in SEK: %.2lf\n", sum);
}
